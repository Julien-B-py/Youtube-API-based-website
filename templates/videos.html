{% extends "bootstrap/base.html" %}
{% block title %}Latest videos listing{% endblock %}

{% block styles %}
{{super()}}
<link rel="stylesheet"
      href="{{url_for('.static', filename='css/styles.css')}}">
{% endblock %}


{% block content %}


<div class="global-container">

    <h1>Most recent videos from your favorite YouTube channels</h1>


    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class=flashes>
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <div class="videos-container">

        {% if not all_channels %}
        <p>Please add a Youtube channel first and try to update manually</p>
        {% endif %}

        {% if not new_videos %}
        <p>You are up to date</p>
        {% endif %}




        {% for channel in all_channels %}
        {% if channel.new and channel.latest_video_id %}

        <div>
            <iframe class="yt-video"
                    src="https://www.youtube.com/embed/{{channel.latest_video_id}}"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>

            <div><a href="{{ url_for('watched',channel_id=channel.channel_id) }}">OK</a></div>
        </div>



        {% endif %}



        {% endfor %}



    </div>

    <div class="bottom-buttons">
        <a class="custom-btn" href="{{ url_for('add_channel') }}">Add a new YouTube channel</a>
        <a class="custom-btn" href="{{ url_for('force_update') }}">Force update</a>
    </div>

</div>



{% endblock %}



